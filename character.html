<!-- author: sjxxxx -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <title>åˆ›å»ºè§’è‰² - é²œæ¤’æœ¬ç§‘æ¨¡æ‹Ÿå™¨</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* å¿—æ„¿å¡«æŠ¥ä¸“ç”¨æ ·å¼ */
        .admission-portal {
            max-width: 1000px;
            margin: 50px auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            overflow: hidden;
        }
        
        .portal-header {
            background: linear-gradient(135deg, var(--xianjao-blue) 0%, var(--xianjao-blue-dark) 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }
        
        .portal-header h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
            font-weight: 700;
        }
        
        .portal-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 14px;
        }
        
        .portal-body {
            padding: 40px;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: #e0e0e0;
            z-index: 0;
        }
        
        .step-item {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .step-item.active .step-circle {
            background: var(--xianjao-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(0,62,126,0.3);
        }
        
        .step-item.completed .step-circle {
            background: var(--success);
            color: white;
        }
        
        .step-label {
            font-size: 13px;
            color: #666;
        }
        
        .step-item.active .step-label {
            color: var(--xianjao-blue);
            font-weight: 600;
        }
        
        /* æˆç»©æŸ¥è¯¢ç•Œé¢ */
        .score-query {
            text-align: center;
            padding: 60px 20px;
        }
        
        .score-query h2 {
            color: var(--xianjao-blue);
            margin-bottom: 20px;
        }
        
        .score-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .score-card {
            padding: 30px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        
        .score-card:hover {
            border-color: var(--xianjao-blue);
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,62,126,0.15);
        }
        
        .score-card.selected {
            border-color: var(--xianjao-blue);
            background: rgba(0,62,126,0.05);
        }
        
        .score-number {
            font-size: 36px;
            font-weight: 700;
            color: var(--xianjao-blue);
            margin-bottom: 10px;
        }
        
        .score-tier {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .score-desc {
            font-size: 12px;
            color: #999;
            line-height: 1.5;
        }
        
        /* å­¦ç§‘ç±»åˆ«é€‰æ‹© */
        .discipline-selector {
            margin-top: 30px;
        }
        
        .discipline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .discipline-btn {
            padding: 20px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .discipline-btn:hover {
            border-color: var(--xianjao-blue-light);
            background: rgba(21,101,192,0.05);
        }
        
        .discipline-btn.selected {
            border-color: var(--xianjao-blue);
            background: var(--xianjao-blue);
            color: white;
        }
        
        .discipline-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }
        
        .discipline-name {
            font-size: 14px;
            font-weight: 500;
        }
        
        /* ä¹¦é™¢é€‰æ‹© */
        .college-selector {
            margin-top: 30px;
        }
        
        .college-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .college-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .college-card:hover {
            border-color: var(--xianjao-blue-light);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .college-card.selected {
            border-color: var(--xianjao-blue);
            background: rgba(0,62,126,0.03);
            box-shadow: 0 8px 24px rgba(0,62,126,0.2);
        }
        
        .college-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
            background: #f5f5f5;
        }
        
        .college-card.locked:hover {
            transform: none;
            box-shadow: none;
        }
        
        .college-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .college-icon {
            font-size: 36px;
        }
        
        .college-info h3 {
            margin: 0 0 5px 0;
            color: var(--xianjao-blue);
            font-size: 18px;
        }
        
        .college-campus {
            font-size: 12px;
            color: #999;
            background: #f0f0f0;
            padding: 3px 10px;
            border-radius: 12px;
            display: inline-block;
        }
        
        .college-desc {
            font-size: 13px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 15px;
            font-style: italic;
            border-left: 3px solid var(--xianjao-blue-light);
            padding-left: 12px;
        }
        
        .college-requirements {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .requirement-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }
        
        .requirement-score {
            font-size: 16px;
            font-weight: 700;
            color: var(--xianjao-blue);
        }
        
        .college-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 500;
        }
        
        .tag.buff {
            background: rgba(76,175,80,0.1);
            color: var(--success);
            border: 1px solid rgba(76,175,80,0.3);
        }
        
        .tag.debuff {
            background: rgba(244,67,54,0.1);
            color: var(--danger);
            border: 1px solid rgba(244,67,54,0.3);
        }
        
        .lock-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }
        
        /* æ“ä½œæŒ‰é’®åŒº */
        .portal-actions {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            gap: 15px;
            padding-top: 30px;
            border-top: 1px solid #e0e0e0;
        }
        
        .btn-portal {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-portal.secondary {
            background: #f5f5f5;
            color: #666;
        }
        
        .btn-portal.secondary:hover {
            background: #e0e0e0;
        }
        
        .btn-portal.primary {
            background: var(--xianjao-blue);
            color: white;
        }
        
        .btn-portal.primary:hover {
            background: var(--xianjao-blue-dark);
            box-shadow: 0 4px 12px rgba(0,62,126,0.3);
        }
        
        .btn-portal:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .section-hidden {
            display: none;
        }
        
        /* æç¤ºä¿¡æ¯ */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid var(--xianjao-blue);
            padding: 15px 20px;
            margin-bottom: 25px;
            border-radius: 4px;
        }
        
        .info-box p {
            margin: 0;
            font-size: 14px;
            color: #1565c0;
            line-height: 1.6;
        }
        
        .info-box strong {
            color: var(--xianjao-blue-dark);
        }
        
        /* ä¸ªäººä¿¡æ¯å¡ç‰‡ */
        .personal-info-card {
            max-width: 650px;
            margin: 0 auto 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .info-row {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .info-row:last-child {
            margin-bottom: 0;
        }
        
        .info-label {
            min-width: 120px;
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }
        
        .info-input-group {
            flex: 1;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .name-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            color: var(--xianjao-blue-dark);
            background: white;
            transition: all 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--xianjao-blue);
            box-shadow: 0 0 0 3px rgba(0,62,126,0.1);
        }
        
        .random-name-btn {
            padding: 10px 16px;
            background: white;
            border: 2px solid var(--xianjao-blue-light);
            border-radius: 8px;
            color: var(--xianjao-blue);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .random-name-btn:hover {
            background: var(--xianjao-blue);
            color: white;
        }
        
        .gender-options {
            display: flex;
            gap: 12px;
            max-width: 400px;
        }
        
        .gender-option {
            flex: 1;
            position: relative;
            min-width: 0;
        }
        
        .gender-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }
        
        .gender-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            font-weight: 500;
            width: 100%;
            text-align: center;
            box-sizing: border-box;
            white-space: nowrap;
        }
        
        .gender-option input[type="radio"]:checked + .gender-label {
            border-color: var(--xianjao-blue);
            background: var(--xianjao-blue);
            color: white;
        }
        
        .gender-label:hover {
            border-color: var(--xianjao-blue-light);
        }
        
        .avatar-icon {
            font-size: 24px;
        }
    </style>
</head>
<body>
    <!-- å¿—æ„¿å¡«æŠ¥ç³»ç»Ÿ -->
    <div class="admission-portal">
        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <div class="portal-header">
            <h1>ğŸ“ é²œæ¤’å¤§å­¦æœ¬ç§‘æ‹›ç”Ÿç³»ç»Ÿ</h1>
            <p>æ¬¢è¿å‚åŠ 2026å¹´å…¨å›½ç»Ÿä¸€é«˜è€ƒå¿—æ„¿å¡«æŠ¥ | è¯·æ ¹æ®æ‚¨çš„åˆ†æ•°é€‰æ‹©åˆé€‚çš„ä¹¦é™¢</p>
        </div>
        
        <div class="portal-body">
            <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
            <div class="step-indicator">
                <div class="step-item active" id="step1">
                    <div class="step-circle">1</div>
                    <div class="step-label">æŸ¥è¯¢æˆç»©</div>
                </div>
                <div class="step-item" id="step2">
                    <div class="step-circle">2</div>
                    <div class="step-label">é€‰æ‹©å­¦ç§‘</div>
                </div>
                <div class="step-item" id="step3">
                    <div class="step-circle">3</div>
                    <div class="step-label">å¡«æŠ¥å¿—æ„¿</div>
                </div>
            </div>
            
            <!-- ç¬¬ä¸€æ­¥ï¼šæˆç»©æŸ¥è¯¢ -->
            <div id="section-score" class="section-score">
                <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
                <div class="personal-info-card">
                    <div class="info-row">
                        <label class="info-label">å§“å / NAME</label>
                        <div class="info-input-group">
                            <input type="text" id="student-name" class="name-input" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" maxlength="10">
                            <button class="random-name-btn" id="random-name-btn">ğŸ² éšæœº</button>
                        </div>
                    </div>
                    <div class="info-row">
                        <label class="info-label">æ€§åˆ« / GENDER</label>
                        <div class="gender-options">
                            <div class="gender-option">
                                <input type="radio" name="gender" id="gender-male" value="male" checked>
                                <label for="gender-male" class="gender-label">
                                    <span class="avatar-icon">ğŸ‘¨</span>
                                    <span>ç”· (Male)</span>
                                </label>
                            </div>
                            <div class="gender-option">
                                <input type="radio" name="gender" id="gender-female" value="female">
                                <label for="gender-female" class="gender-label">
                                    <span class="avatar-icon">ğŸ‘©</span>
                                    <span>å¥³ (Female)</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="score-query">
                    <h2>ğŸ“‹ è¯·é€‰æ‹©æ‚¨çš„é«˜è€ƒæˆç»©æ¡£æ¬¡</h2>
                    <p style="color: #666; margin-top: 10px;">ä¸åŒçš„æˆç»©å°†å½±å“æ‚¨å¯ä»¥æŠ¥è€ƒçš„ä¹¦é™¢èŒƒå›´</p>
                    
                    <div class="score-options">
                        <div class="score-card" data-score="680" data-tier="extraordinary">
                            <div class="score-number">680+</div>
                            <div class="score-tier">ğŸ† è¶…å¸¸å‘æŒ¥</div>
                            <div class="score-desc">çœå‰200åï¼Œæ‰€æœ‰ä¹¦é™¢ä»»é€‰<br>å¼€å±€GPA+0.5ï¼Œå£°æœ›+20</div>
                        </div>
                        
                        <div class="score-card" data-score="650" data-tier="excellent">
                            <div class="score-number">650-679</div>
                            <div class="score-tier">ğŸŒŸ ä¼˜ç§€æˆç»©</div>
                            <div class="score-desc">çœå‰1000åï¼Œå¤§éƒ¨åˆ†ä¹¦é™¢å¯é€‰<br>å¼€å±€GPA+0.3ï¼Œå£°æœ›+10</div>
                        </div>
                        
                        <div class="score-card" data-score="620" data-tier="good">
                            <div class="score-number">620-649</div>
                            <div class="score-tier">âœ… æ­£å¸¸å‘æŒ¥</div>
                            <div class="score-desc">ç¨³å®šå‘æŒ¥ï¼Œå¤šæ•°ä¹¦é™¢å¯é€‰<br>æ ‡å‡†å¼€å±€ï¼Œæ— ä¿®æ­£</div>
                        </div>
                        
                        <div class="score-card" data-score="590" data-tier="average">
                            <div class="score-number">590-619</div>
                            <div class="score-tier">ğŸ“ å‹çº¿å½•å–</div>
                            <div class="score-desc">åˆšè¿‡å½•å–çº¿ï¼Œéƒ¨åˆ†ä¹¦é™¢å¯é€‰<br>å¼€å±€ç•¥æœ‰æŒ‘æˆ˜</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç¬¬äºŒæ­¥ï¼šå­¦ç§‘ç±»åˆ«é€‰æ‹© -->
            <div id="section-discipline" class="section-hidden">
                <div class="info-box">
                    <p><strong>ğŸ’¡ æç¤ºï¼š</strong>æ‚¨çš„é«˜è€ƒæˆç»©ä¸º <span id="selected-score-display"></span> åˆ†ï¼Œ<span id="selected-tier-display"></span>ã€‚è¯·é€‰æ‹©æ‚¨æ„Ÿå…´è¶£çš„å­¦ç§‘ç±»åˆ«ï¼Œè¿™å°†å½±å“æ‚¨çš„ä¹¦é™¢æ¨èã€‚</p>
                </div>
                
                <div class="discipline-selector">
                    <h3 style="color: var(--xianjao-blue); margin-bottom: 15px;">ğŸ¯ é€‰æ‹©å­¦ç§‘ç±»åˆ«</h3>
                    <div class="discipline-grid">
                        <div class="discipline-btn" data-discipline="engineering">
                            <div class="discipline-icon">âš™ï¸</div>
                            <div class="discipline-name">å·¥å­¦</div>
                            <div style="font-size: 10px; color: #999; margin-top: 3px;">ç”µæ°”/æœºæ¢°/èˆªå¤©</div>
                        </div>
                        <div class="discipline-btn" data-discipline="science">
                            <div class="discipline-icon">ğŸ”¬</div>
                            <div class="discipline-name">ç†å­¦</div>
                            <div style="font-size: 10px; color: #999; margin-top: 3px;">æ•°ç†åŒ–ç”Ÿ</div>
                        </div>
                        <div class="discipline-btn" data-discipline="medicine">
                            <div class="discipline-icon">âš•ï¸</div>
                            <div class="discipline-name">åŒ»å­¦</div>
                            <div style="font-size: 10px; color: #999; margin-top: 3px;">ä¸´åºŠ/å£è…”/è¯å­¦</div>
                        </div>
                        <div class="discipline-btn" data-discipline="business">
                            <div class="discipline-icon">ğŸ’¼</div>
                            <div class="discipline-name">ç»ç®¡</div>
                            <div style="font-size: 10px; color: #999; margin-top: 3px;">ç»é‡‘/ç®¡ç†</div>
                        </div>
                        <div class="discipline-btn" data-discipline="humanities">
                            <div class="discipline-icon">ğŸ¨</div>
                            <div class="discipline-name">äººæ–‡ç¤¾ç§‘</div>
                            <div style="font-size: 10px; color: #999; margin-top: 3px;">æ³•å­¦/æ–°é—»/å“²å­¦</div>
                        </div>
                        <div class="discipline-btn" data-discipline="elite">
                            <div class="discipline-icon">ğŸš€</div>
                            <div class="discipline-name">æ‹”å°–è®¡åˆ’</div>
                            <div style="font-size: 10px; color: #999; margin-top: 3px;">é’±å­¦æ£®ç­</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç¬¬ä¸‰æ­¥ï¼šä¹¦é™¢é€‰æ‹© -->
            <div id="section-college" class="section-hidden">
                <div class="info-box">
                    <p><strong>ğŸ« å¡«æŠ¥å¿—æ„¿ï¼š</strong>æ ¹æ®æ‚¨çš„æˆç»©å’Œå­¦ç§‘é€‰æ‹©ï¼Œä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥æŠ¥è€ƒçš„ä¹¦é™¢ã€‚è¯·ä»”ç»†é˜…è¯»å„ä¹¦é™¢ç‰¹è‰²ååšå‡ºé€‰æ‹©ã€‚</p>
                </div>
                
                <div class="college-selector">
                    <h3 style="color: var(--xianjao-blue); margin-bottom: 15px;">ğŸ“ é€‰æ‹©æ‚¨çš„ç¬¬ä¸€å¿—æ„¿ä¹¦é™¢</h3>
                    <div class="college-grid" id="college-grid">
                        <!-- åŠ¨æ€ç”Ÿæˆä¹¦é™¢å¡ç‰‡ -->
                    </div>
                </div>
            </div>
            
            <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
            <div class="portal-actions">
                <button id="btn-prev" class="btn-portal secondary" style="display: none;">â† ä¸Šä¸€æ­¥</button>
                <button id="btn-next" class="btn-portal primary" disabled>ä¸‹ä¸€æ­¥ â†’</button>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script>
        // çŠ¶æ€ç®¡ç†
        let currentStep = 1;
        let selectedScore = null;
        let selectedTier = null;
        let selectedDiscipline = null;
        let selectedCollege = null;
        let studentName = '';
        let studentGender = 'male';
        
        // éšæœºå§“ååº“
        const surnames = ['ç‹', 'æ', 'å¼ ', 'åˆ˜', 'é™ˆ', 'æ¨', 'é»„', 'èµµ', 'å‘¨', 'å´', 'å¾', 'å­™', 'é©¬', 'æœ±', 'èƒ¡', 'éƒ­', 'ä½•', 'æ—', 'ç½—', 'é«˜'];
        const maleNames = ['æµ©ç„¶', 'å®‡è½©', 'åšæ–‡', 'å­è½©', 'æ¢“è±ª', 'ä¿Šæ°', 'æ˜è½©', 'å¤©ä½‘', 'ç‘éœ–', 'é”¦ç¨‹', 'æ™¨æ›¦', 'ç¿æ™º', 'æ–‡æ˜Š', 'ç…œåŸ', 'å˜‰æ‡¿'];
        const femaleNames = ['è¯—æ¶µ', 'é›¨è±', 'æ¬£æ€¡', 'æ¢“è±', 'å¯é¦¨', 'é›…çª', 'æ€çª', 'é™æ€¡', 'å©‰å©·', 'æ¢¦æ´', 'è¯—é›…', 'æ¸…å¦', 'é›¨æ¡', 'èˆ’æ¶µ', 'èŠ·è‹¥'];
        
        // ä¹¦é™¢åˆ†æ•°çº¿é…ç½®ï¼ˆåŸºäºçœŸå®ä¸“ä¸šåˆ†å¸ƒï¼‰
        const collegeRequirements = {
            qianxuesen: { minScore: 670, disciplines: ['elite'], priority: 1, campus: 'xingqing' },
            nanyang: { minScore: 645, disciplines: ['engineering'], priority: 2, campus: 'xingqing' },
            zhongying: { minScore: 640, disciplines: ['engineering'], priority: 3, campus: 'xingqing' },
            pengkang: { minScore: 635, disciplines: ['engineering', 'science'], priority: 4, campus: 'xingqing' },
            lizhi: { minScore: 630, disciplines: ['science'], priority: 5, campus: 'xingqing' },
            zonglian: { minScore: 630, disciplines: ['medicine'], priority: 6, campus: 'yanta' },
            wenzhi: { minScore: 625, disciplines: ['engineering'], priority: 7, campus: 'xingqing' },
            qide: { minScore: 620, disciplines: ['business', 'engineering'], priority: 8, campus: 'chuangxingang' },
            chongshi: { minScore: 615, disciplines: ['humanities', 'business'], priority: 9, campus: 'xingqing' }
        };
        
        // åˆ†æ•°æ¡£æ¬¡å¯¹åº”çš„å‡ºèº«èƒŒæ™¯
        const tierBackgrounds = {
            extraordinary: 'prodigy',    // 680+ -> å°‘å¹´ç­ç¥ç«¥
            excellent: 'qianban',         // 650-679 -> é’±ç­å¤§ä½¬
            good: 'normal',               // 620-649 -> èŒæ–°å°ç™½
            average: 'normal'             // 590-619 -> èŒæ–°å°ç™½
        };
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initPersonalInfo();
            initScoreSelection();
            initDisciplineSelection();
            initNavigation();
        });
        
        // ä¸ªäººä¿¡æ¯åˆå§‹åŒ–
        function initPersonalInfo() {
            const nameInput = document.getElementById('student-name');
            const randomBtn = document.getElementById('random-name-btn');
            const genderRadios = document.querySelectorAll('input[name="gender"]');
            
            // éšæœºå§“åæŒ‰é’®
            randomBtn.addEventListener('click', function() {
                const surname = surnames[Math.floor(Math.random() * surnames.length)];
                const currentGender = document.querySelector('input[name="gender"]:checked').value;
                const nameList = currentGender === 'male' ? maleNames : femaleNames;
                const givenName = nameList[Math.floor(Math.random() * nameList.length)];
                nameInput.value = surname + givenName;
                studentName = surname + givenName;
            });
            
            // å§“åè¾“å…¥
            nameInput.addEventListener('input', function() {
                studentName = this.value.trim();
                validateStep1();
            });
            
            // æ€§åˆ«é€‰æ‹©
            genderRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    studentGender = this.value;
                });
            });
            
            // ç”Ÿæˆé»˜è®¤éšæœºå§“å
            randomBtn.click();
        }
        
        // éªŒè¯ç¬¬ä¸€æ­¥æ˜¯å¦å®Œæˆ
        function validateStep1() {
            const hasName = studentName.length > 0;
            const hasScore = selectedScore !== null;
            document.getElementById('btn-next').disabled = !(hasName && hasScore);
        };
        
        // ç¬¬ä¸€æ­¥ï¼šæˆç»©é€‰æ‹©
        function initScoreSelection() {
            const scoreCards = document.querySelectorAll('.score-card');
            scoreCards.forEach(card => {
                card.addEventListener('click', function() {
                    scoreCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    selectedScore = parseInt(this.dataset.score);
                    selectedTier = this.dataset.tier;
                    
                    validateStep1();
                });
            });
        }
        
        // ç¬¬äºŒæ­¥ï¼šå­¦ç§‘é€‰æ‹©
        function initDisciplineSelection() {
            const disciplineBtns = document.querySelectorAll('.discipline-btn');
            disciplineBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    disciplineBtns.forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    selectedDiscipline = this.dataset.discipline;
                    document.getElementById('btn-next').disabled = false;
                });
            });
        }
        
        // å¯¼èˆªæ§åˆ¶
        function initNavigation() {
            const btnNext = document.getElementById('btn-next');
            const btnPrev = document.getElementById('btn-prev');
            
            btnNext.addEventListener('click', function() {
                if (currentStep === 1 && selectedScore) {
                    goToStep(2);
                } else if (currentStep === 2 && selectedDiscipline) {
                    goToStep(3);
                } else if (currentStep === 3 && selectedCollege) {
                    startGame();
                }
            });
            
            btnPrev.addEventListener('click', function() {
                if (currentStep > 1) {
                    goToStep(currentStep - 1);
                }
            });
        }
        
        // æ­¥éª¤è·³è½¬
        function goToStep(step) {
            currentStep = step;
            
            // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
            updateStepIndicator();
            
            // æ˜¾ç¤º/éšè—å¯¹åº”åŒºåŸŸ
            document.getElementById('section-score').classList.toggle('section-hidden', step !== 1);
            document.getElementById('section-discipline').classList.toggle('section-hidden', step !== 2);
            document.getElementById('section-college').classList.toggle('section-hidden', step !== 3);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('btn-prev').style.display = step > 1 ? 'block' : 'none';
            const btnNext = document.getElementById('btn-next');
            
            if (step === 1) {
                btnNext.textContent = 'ä¸‹ä¸€æ­¥ â†’';
                btnNext.disabled = !selectedScore;
            } else if (step === 2) {
                // æ›´æ–°æˆç»©æ˜¾ç¤º
                updateScoreDisplay();
                btnNext.textContent = 'ä¸‹ä¸€æ­¥ â†’';
                btnNext.disabled = !selectedDiscipline;
            } else if (step === 3) {
                // æ¸²æŸ“ä¹¦é™¢åˆ—è¡¨
                renderColleges();
                btnNext.textContent = 'ç¡®è®¤å…¥å­¦ ğŸ“';
                btnNext.disabled = !selectedCollege;
            }
        }
        
        // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
        function updateStepIndicator() {
            for (let i = 1; i <= 3; i++) {
                const stepItem = document.getElementById(`step${i}`);
                stepItem.classList.remove('active', 'completed');
                
                if (i < currentStep) {
                    stepItem.classList.add('completed');
                } else if (i === currentStep) {
                    stepItem.classList.add('active');
                }
            }
        }
        
        // æ›´æ–°æˆç»©æ˜¾ç¤º
        function updateScoreDisplay() {
            const tierNames = {
                extraordinary: 'è¶…å¸¸å‘æŒ¥ï¼ˆ680+ï¼‰',
                excellent: 'ä¼˜ç§€æˆç»©ï¼ˆ650-679ï¼‰',
                good: 'æ­£å¸¸å‘æŒ¥ï¼ˆ620-649ï¼‰',
                average: 'å‹çº¿å½•å–ï¼ˆ590-619ï¼‰'
            };
            
            document.getElementById('selected-score-display').textContent = selectedScore;
            document.getElementById('selected-tier-display').textContent = tierNames[selectedTier];
        }
        
        // æ¸²æŸ“ä¹¦é™¢åˆ—è¡¨
        function renderColleges() {
            const grid = document.getElementById('college-grid');
            grid.innerHTML = '';
            
            // è·å–æ‰€æœ‰ä¹¦é™¢å¹¶æŒ‰ä¼˜å…ˆçº§æ’åº
            const colleges = Object.entries(GameData.colleges)
                .map(([id, data]) => ({
                    id,
                    ...data,
                    requirement: collegeRequirements[id] || { minScore: 590, disciplines: [], priority: 99 }
                }))
                .sort((a, b) => a.requirement.priority - b.requirement.priority);
            
            colleges.forEach(college => {
                const req = college.requirement;
                const isScoreEnough = selectedScore >= req.minScore;
                const isDisciplineMatch = req.disciplines.length === 0 || 
                                         req.disciplines.includes(selectedDiscipline);
                const isLocked = !isScoreEnough || !isDisciplineMatch;
                
                const card = document.createElement('div');
                card.className = `college-card ${isLocked ? 'locked' : ''}`;
                card.dataset.collegeId = college.id;
                
                // æ„å»ºæ ‡ç­¾
                let tags = '';
                if (college.buffs) {
                    college.buffs.forEach(buff => {
                        tags += `<span class="tag buff">âœ“ ${buff.name}</span>`;
                    });
                }
                if (college.debuffs) {
                    college.debuffs.forEach(debuff => {
                        tags += `<span class="tag debuff">âš  ${debuff.name}</span>`;
                    });
                }
                
                // æ ¡åŒºæ˜¾ç¤º
                let campusText = 'å…´åº†æ ¡åŒº';
                if (req.campus === 'yanta') campusText = 'é›å¡”æ ¡åŒº';
                else if (req.campus === 'chuangxingang') campusText = 'åˆ›æ–°æ¸¯';
                
                card.innerHTML = `
                    ${isLocked ? '<div class="lock-badge">ğŸ”’ æ¡ä»¶ä¸ç¬¦</div>' : ''}
                    <div class="college-header">
                        <div class="college-icon">${college.icon}</div>
                        <div class="college-info">
                            <h3>${college.name}</h3>
                            <span class="college-campus">${campusText}</span>
                        </div>
                    </div>
                    <div class="college-desc">${college.description}</div>
                    <div class="college-requirements">
                        <span class="requirement-label">å½•å–åˆ†æ•°çº¿ï¼š</span>
                        <span class="requirement-score">${req.minScore}åˆ†</span>
                    </div>
                    <div class="college-tags">${tags}</div>
                `;
                
                // åªæœ‰æœªé”å®šçš„ä¹¦é™¢æ‰èƒ½ç‚¹å‡»
                if (!isLocked) {
                    card.style.cursor = 'pointer';
                    card.addEventListener('click', function() {
                        document.querySelectorAll('.college-card').forEach(c => c.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedCollege = this.dataset.collegeId;
                        document.getElementById('btn-next').disabled = false;
                    });
                }
                
                grid.appendChild(card);
            });
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (!selectedCollege || !selectedTier) return;
            
            // æ ¹æ®åˆ†æ•°æ¡£æ¬¡é€‰æ‹©å¯¹åº”çš„å‡ºèº«èƒŒæ™¯
            const background = tierBackgrounds[selectedTier];
            
            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('xjtu_character', JSON.stringify({
                name: studentName,
                gender: studentGender,
                background: background,
                college: selectedCollege,
                score: selectedScore,
                tier: selectedTier,
                discipline: selectedDiscipline
            }));
            
            sessionStorage.setItem('valid_session', 'true');
            localStorage.setItem('xjtu_session_token', 'true');
            
            // è·³è½¬åˆ°æ¸¸æˆç•Œé¢
            window.location.href = 'game.html';
        }
    </script>
</body>
</html>
